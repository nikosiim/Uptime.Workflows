@page "/signing-initiation/{templateId:int}/{documentId:int}"

@inherits WorkflowInitForm<SigningInitFormModel>

<MudPaper Class="pa-4" Elevation="0">
    <MudPaper Class="pa-4 mb-4" Elevation="0">
        <MudText Typo="Typo.h4">@FormModel.TemplateName</MudText>
    </MudPaper>

    <MudForm @ref="Form" Spacing="1">
        <MudTextField T="string" Label="Assigned To" Variant="Variant.Outlined" @bind-Value="FormModel.Signer" Placeholder="Comma-separated usernames" />
        <MudTextField T="string" Label="Task" Variant="Variant.Outlined" @bind-Value="FormModel.Task" Lines="4" />
        <MudNumericField Label="Due Days" Variant="Variant.Outlined" @bind-Value="FormModel.DueDays" />
    </MudForm>

    <MudStack Row="true" Class="mt-4" Justify="Justify.FlexStart">
        <MudButton Variant="Variant.Filled" OnClick="StartWorkflow" Color="Color.Primary">Start</MudButton>
        <MudButton Variant="Variant.Outlined" OnClick="Cancel" Color="Color.Error">Cancel</MudButton>
    </MudStack>
</MudPaper>


@code
{
    protected override async Task StartWorkflow()
    {
        await base.StartWorkflow();

        // TODO: add signing payload

        Navigation.NavigateTo("/contracts");
    }
}
